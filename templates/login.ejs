<!DOCTYPE html>
<html lang="en">
<%- include('components/head') %>
<%- include('components/theme') %>
<div class="position-fixed p-8" id="toast-bar" style="z-index: 1000; top: 0;left: 50%; transform: translateX(-50%);">
    
</div>
<div class="sign-in bg-default-2 d-flex align-items-center overflow-auto" style="height:100vh">
    <!-- Header Brand Area -->
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-md-9 col-lg-7 col-xl-5">
          <div class="main-block">
            
            <div class="login-form bg-white border rounded-10 px-12 py-16 shadow-1 mb-11">
                <div class="form-title text-center">
                    <h2 class="title gr-text-4">Login</h2>
                    <p class="gr-text-10 mb-13">To get started, you need to sign in here.</p>
                  </div>
                <div class="form-group">
                  <label for="mobile" class="gr-text-11 font-weight-bold text-blackish-blue">Mobil Number</label>
                  <input class="form-control gr-text-11 border" name="mobile" type="text" id="mobile" placeholder="Your 10 digit mobile number">
                </div>
                <div class="form-group forget-block">
                  <div class="d-flex justify-content-between">
                    <label for="password" class="gr-text-11 font-weight-bold text-blackish-blue">Password</label>
                    <a class="forget-link" href="#" id="resetPassword">Forgot Password?</a>
                  </div>
                  <input id="password" class="form-control gr-text-11 border" name="password" type="password" placeholder="Enter password">
                </div>
                <!-- <div class="form-check mb-7">
              <input class="form-check-input" type="checkbox" value="" id="formCheck1">
              <label class="gr-check-input gr-text-11 text-blackish-blue" for="formCheck1">
                Remember me
              </label>
            </div> -->
                <!-- <div class="form-group  mb-7">
                  <label for="terms-check" class="gr-check-input mb-7 d-flex">
                    <input class="d-none" type="checkbox" id="terms-check">
                    <span class="checkbox mt-1 mr-2"></span>
                    <p class="gr-text-11 text-blackish-blue mb-0">Remember me</p>
                  </label>
                </div> -->
                <div class="form-group button-block mb-2">
                  <button id="loginBtn" class="form-btn btn btn-primary gr-hover-y w-100">Sign In</button>
                </div>
            </div>
            <!-- <div class="form-bottom excerpt text-center">
              <p class="sign-up-text gr-text-9 gr-text-color">Donâ€™t have an account? <a href="/signup" class="text-primary">Create an account</a></p>
            </div> -->
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="changePasswordModal" tabindex="-1" role="dialog" aria-hidden="true">
    <div style="position: fixed;top:0px;height: 100vh;width: 1000vw;left: 0;background: #f4f7fa;"></div>
    <div class="modal-dialog shadow-4" role="document">
      <div class="modal-content">
        <div class="modal-header pt-12 px-12 border-0">
          <h5 class="modal-title" id="exampleModalLabel">Enter the code sent to +91<span id="showMobile"></span></h5>
        </div>
        <div class="modal-body px-12">
          <div class="form-group w-100">
            <input class="form-control gr-text-11 border" name="code" type="text" id="code" placeholder="Enter OTP here">
          </div>
          <div class="form-group w-100">
            <input class="form-control gr-text-11 border" name="password" type="password" id="password1" placeholder="New Password">
          </div>
          <div class="form-group w-100">
            <input class="form-control gr-text-11 border" name="cnfrmPassword" type="password" id="password2" placeholder="Confirm Password">
          </div>
          <div class="d-flex mt-4 justify-content-between">
            <p class="py-2 text-danger mb-0" id="otp-error"></p>
            <a id="resendOTP" href="#">Resend OTP</a>
          </div>
        </div>
        <div class="modal-footer pb-12 px-12 border-0">
          <button type="button" id="changePasswordBtn" class="w-100 btn btn-primary">Reset Password</button>
        </div>
      </div>
    </div>
  </div>
    
  <%- include('components/footer') %>
  <script>

    $('#loginBtn').click(() => {

      var mobile = document.getElementById('mobile').value
      var password = document.getElementById('password').value

      var settings = {
        "url": "/api/user/login",
        "method": "POST",
        "timeout": 0,
        "headers": {
          "Content-Type": "application/json",
        },
        "data": JSON.stringify({"mobile": mobile,"password": password}),
        success: (response) => {
          window.location.replace('/dashboard')
        },
        error: (error) => {
          toast.error(error.responseText)
        }
      };

      $.ajax(settings)

    })

  </script>
  <script src="/static/js/login.js"></script>

</body>
</html>